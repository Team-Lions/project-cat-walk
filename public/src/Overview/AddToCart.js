import React from 'react';
import SizeSelector from './SizeSelector.jsx';
import QuantitySelector from './QuantitySelector.jsx';

class AddToCart extends React.Component {
  //expects props to contain object called skus
  constructor(props) {
    super(props);
    this.state = {
      sizeFirstSkus: {},
      sizes: [],
      sizeSelection: '',
      quantityEnabled: false,
      quantityAvailable: 0,
      quantitySelection: null
    };
  }

  changeSize(e) {
    // if this is the first slection away formthe default, remove "Select Size as an option"
    if (document.getElementById('size').options[0].value === 'Select Size') {
      document.getElementById('size').remove(0);
    }

    var newSize = e.target.value;
    document.getElementById('quantity').value = 1;
    this.setState({
      sizeSelection: newSize,
      quantityEnabled: true,
      quantityAvailable: this.state.sizeFirstSkus[newSize].quantity,
      quantitySelection: 1
    });
  }

  changeQuantity(e) {
    var newQuantity = e.target.value;
    this.setState({
      quantitySelection: newQuantity
    });
  }

  enforceSizeSelection(e) {
    //opens size dropdown
    //displays a message that says "Please select size"
    console.log('please select size');
  }

  addToCart(e) {
    //event handler passed into the button
    //will have different functionality based on the current state
    console.log('added to cart');
  }

  componentDidMount() {
    //populates sizeFirstSkus and sizes objects
    var sizeFirstSkus = {};
    var size, quantity;

    for (var k in this.props.skus) {
      size = this.props.skus[k].size;
      quantity = this.props.skus[k].quantity;
      sizeFirstSkus[size] = {
        skuId: k,
        quantity: quantity
      };
    }

    this.setState({
      sizeFirstSkus: sizeFirstSkus,
      sizes: Object.keys(sizeFirstSkus)
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, this.state.sizes.length === 0 ? /*#__PURE__*/React.createElement("select", {
      id: "size",
      name: "size",
      disabled: true
    }, /*#__PURE__*/React.createElement("option", null, "OUT OF STOCK")) : /*#__PURE__*/React.createElement(SizeSelector, {
      sizes: this.state.sizes,
      change: this.changeSize.bind(this)
    }), this.state.quantityEnabled ? /*#__PURE__*/React.createElement(QuantitySelector, {
      quantityAvailable: this.state.quantityAvailable,
      change: this.changeQuantity.bind(this)
    }) : /*#__PURE__*/React.createElement("select", {
      id: "quantity",
      name: "quantity",
      disabled: true
    }, /*#__PURE__*/React.createElement("option", null, "-")), this.state.sizes.length > 0 ? this.state.sizeSelection === "" ?
    /*#__PURE__*/

    /* there is quantity, but size is not selected. Button opens dropdown display message */
    React.createElement("button", {
      onClick: this.enforceSizeSelection.bind(this)
    }, "Add to Cart") :
    /*#__PURE__*/

    /* quantity and size selected. Button adds to cart */
    React.createElement("button", {
      onClick: this.addToCart.bind(this)
    }, "Add to Cart") :
    /*#__PURE__*/

    /* hide button */
    React.createElement("button", {
      style: {
        visibility: 'hidden'
      }
    }, "Add to Cart"));
  }

}

;
export default AddToCart;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2NsaWVudC9zcmMvT3ZlcnZpZXcvQWRkVG9DYXJ0LmpzeCJdLCJuYW1lcyI6WyJSZWFjdCIsIlNpemVTZWxlY3RvciIsIlF1YW50aXR5U2VsZWN0b3IiLCJBZGRUb0NhcnQiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwic3RhdGUiLCJzaXplRmlyc3RTa3VzIiwic2l6ZXMiLCJzaXplU2VsZWN0aW9uIiwicXVhbnRpdHlFbmFibGVkIiwicXVhbnRpdHlBdmFpbGFibGUiLCJxdWFudGl0eVNlbGVjdGlvbiIsImNoYW5nZVNpemUiLCJlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm9wdGlvbnMiLCJ2YWx1ZSIsInJlbW92ZSIsIm5ld1NpemUiLCJ0YXJnZXQiLCJzZXRTdGF0ZSIsInF1YW50aXR5IiwiY2hhbmdlUXVhbnRpdHkiLCJuZXdRdWFudGl0eSIsImVuZm9yY2VTaXplU2VsZWN0aW9uIiwiY29uc29sZSIsImxvZyIsImFkZFRvQ2FydCIsImNvbXBvbmVudERpZE1vdW50Iiwic2l6ZSIsImsiLCJza3VzIiwic2t1SWQiLCJPYmplY3QiLCJrZXlzIiwicmVuZGVyIiwibGVuZ3RoIiwiYmluZCIsInZpc2liaWxpdHkiXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLEtBQVAsTUFBa0IsT0FBbEI7QUFDQSxPQUFPQyxZQUFQLE1BQXlCLG9CQUF6QjtBQUNBLE9BQU9DLGdCQUFQLE1BQTZCLHdCQUE3Qjs7QUFFQSxNQUFNQyxTQUFOLFNBQXdCSCxLQUFLLENBQUNJLFNBQTlCLENBQXdDO0FBQ3RDO0FBQ0FDLEVBQUFBLFdBQVcsQ0FBQ0MsS0FBRCxFQUFRO0FBQ2pCLFVBQU1BLEtBQU47QUFDQSxTQUFLQyxLQUFMLEdBQWE7QUFDWEMsTUFBQUEsYUFBYSxFQUFFLEVBREo7QUFFWEMsTUFBQUEsS0FBSyxFQUFFLEVBRkk7QUFHWEMsTUFBQUEsYUFBYSxFQUFFLEVBSEo7QUFJWEMsTUFBQUEsZUFBZSxFQUFFLEtBSk47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QUUsS0FBS0osS0FBTCxDQUFXSyxpQkFBaEQ7QUFBbUUsTUFBQSxNQUFNLEVBQUUsS0FBS2EsY0FBTCxDQUFvQmUsSUFBcEIsQ0FBeUIsSUFBekI7QUFBM0UsTUFERCxnQkFHQztBQUFRLE1BQUEsRUFBRSxFQUFDLFVBQVg7QUFBc0IsTUFBQSxJQUFJLEVBQUMsVUFBM0I7QUFBc0MsTUFBQSxRQUFRO0FBQTlDLG9CQUNFLHdDQURGLENBWEosRUFlRyxLQUFLakMsS0FBTCxDQUFXRSxLQUFYLENBQWlCOEIsTUFBakIsR0FBMEIsQ0FBMUIsR0FDQyxLQUFLaEMsS0FBTCxDQUFXRyxhQUFYLEtBQTZCLEVBQTdCO0FBQUE7O0FBQ0U7QUFDQTtBQUFRLE1BQUEsT0FBTyxFQUFFLEtBQUtpQixvQkFBTCxDQUEwQmEsSUFBMUIsQ0FBK0IsSUFBL0I7QUFBakIscUJBRkY7QUFBQTs7QUFJRTtBQUNBO0FBQVEsTUFBQSxPQUFPLEVBQUUsS0FBS1YsU0FBTCxDQUFlVSxJQUFmLENBQW9CLElBQXBCO0FBQWpCLHFCQU5IO0FBQUE7O0FBUUM7QUFDQTtBQUFRLE1BQUEsS0FBSyxFQUFFO0FBQUNDLFFBQUFBLFVBQVUsRUFBRTtBQUFiO0FBQWYscUJBeEJKLENBREY7QUE2QkQ7O0FBaEdxQzs7QUFpR3ZDO0FBRUQsZUFBZXRDLFNBQWYiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFNpemVTZWxlY3RvciBmcm9tICcuL1NpemVTZWxlY3Rvci5qc3gnO1xuaW1wb3J0IFF1YW50aXR5U2VsZWN0b3IgZnJvbSAnLi9RdWFudGl0eVNlbGVjdG9yLmpzeCc7XG5cbmNsYXNzIEFkZFRvQ2FydCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIC8vZXhwZWN0cyBwcm9wcyB0byBjb250YWluIG9iamVjdCBjYWxsZWQgc2t1c1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2l6ZUZpcnN0U2t1czoge30sXG4gICAgICBzaXplczogW10sXG4gICAgICBzaXplU2VsZWN0aW9uOiAnJyxcbiAgICAgIHF1YW50aXR5RW5hYmxlZDogZmFsc2UsXG4gICAgICBxdWFudGl0eUF2YWlsYWJsZTogMCxcbiAgICAgIHF1YW50aXR5U2VsZWN0aW9uOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIGNoYW5nZVNpemUoZSkge1xuICAgIC8vIGlmIHRoaXMgaXMgdGhlIGZpcnN0IHNsZWN0aW9uIGF3YXkgZm9ybXRoZSBkZWZhdWx0LCByZW1vdmUgXCJTZWxlY3QgU2l6ZSBhcyBhbiBvcHRpb25cIlxuICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaXplJykub3B0aW9uc1swXS52YWx1ZSA9PT0gJ1NlbGVjdCBTaXplJykge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpemUnKS5yZW1vdmUoMCk7XG4gICAgfVxuICAgIHZhciBuZXdTaXplID0gZS50YXJnZXQudmFsdWU7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1YW50aXR5JykudmFsdWUgPSAxO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2l6ZVNlbGVjdGlvbjogbmV3U2l6ZSxcbiAgICAgIHF1YW50aXR5RW5hYmxlZDogdHJ1ZSxcbiAgICAgIHF1YW50aXR5QXZhaWxhYmxlOiB0aGlzLnN0YXRlLnNpemVGaXJzdFNrdXNbbmV3U2l6ZV0ucXVhbnRpdHksXG4gICAgICBxdWFudGl0eVNlbGVjdGlvbjogMVxuICAgIH0pO1xuICB9XG5cbiAgY2hhbmdlUXVhbnRpdHkoZSkge1xuICAgIHZhciBuZXdRdWFudGl0eSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgcXVhbnRpdHlTZWxlY3Rpb246IG5ld1F1YW50aXR5XG4gICAgfSk7XG4gIH1cblxuICBlbmZvcmNlU2l6ZVNlbGVjdGlvbihlKSB7XG4gICAgLy9vcGVucyBzaXplIGRyb3Bkb3duXG4gICAgLy9kaXNwbGF5cyBhIG1lc3NhZ2UgdGhhdCBzYXlzIFwiUGxlYXNlIHNlbGVjdCBzaXplXCJcbiAgICBjb25zb2xlLmxvZygncGxlYXNlIHNlbGVjdCBzaXplJyk7XG4gIH1cblxuICBhZGRUb0NhcnQoZSkge1xuICAgIC8vZXZlbnQgaGFuZGxlciBwYXNzZWQgaW50byB0aGUgYnV0dG9uXG4gICAgLy93aWxsIGhhdmUgZGlmZmVyZW50IGZ1bmN0aW9uYWxpdHkgYmFzZWQgb24gdGhlIGN1cnJlbnQgc3RhdGVcbiAgICBjb25zb2xlLmxvZygnYWRkZWQgdG8gY2FydCcpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLy9wb3B1bGF0ZXMgc2l6ZUZpcnN0U2t1cyBhbmQgc2l6ZXMgb2JqZWN0c1xuICAgIHZhciBzaXplRmlyc3RTa3VzID0ge307XG4gICAgdmFyIHNpemUsIHF1YW50aXR5O1xuICAgIGZvciAodmFyIGsgaW4gdGhpcy5wcm9wcy5za3VzKSB7XG4gICAgICBzaXplID0gdGhpcy5wcm9wcy5za3VzW2tdLnNpemU7XG4gICAgICBxdWFudGl0eSA9IHRoaXMucHJvcHMuc2t1c1trXS5xdWFudGl0eTtcbiAgICAgIHNpemVGaXJzdFNrdXNbc2l6ZV0gPSB7XG4gICAgICAgIHNrdUlkOiBrLFxuICAgICAgICBxdWFudGl0eTogcXVhbnRpdHlcbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2l6ZUZpcnN0U2t1czogc2l6ZUZpcnN0U2t1cyxcbiAgICAgIHNpemVzOiBPYmplY3Qua2V5cyhzaXplRmlyc3RTa3VzKVxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICB7dGhpcy5zdGF0ZS5zaXplcy5sZW5ndGggPT09IDAgP1xuICAgICAgICAgIDxzZWxlY3QgaWQ9XCJzaXplXCIgbmFtZT1cInNpemVcIiBkaXNhYmxlZD5cbiAgICAgICAgICAgIDxvcHRpb24+T1VUIE9GIFNUT0NLPC9vcHRpb24+XG4gICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgOlxuICAgICAgICAgIDxTaXplU2VsZWN0b3Igc2l6ZXM9e3RoaXMuc3RhdGUuc2l6ZXN9IGNoYW5nZT17dGhpcy5jaGFuZ2VTaXplLmJpbmQodGhpcyl9Lz5cbiAgICAgICAgfVxuICAgICAgICB7dGhpcy5zdGF0ZS5xdWFudGl0eUVuYWJsZWQgP1xuICAgICAgICAgIDxRdWFudGl0eVNlbGVjdG9yIHF1YW50aXR5QXZhaWxhYmxlPXt0aGlzLnN0YXRlLnF1YW50aXR5QXZhaWxhYmxlfSBjaGFuZ2U9e3RoaXMuY2hhbmdlUXVhbnRpdHkuYmluZCh0aGlzKX0vPlxuICAgICAgICAgIDpcbiAgICAgICAgICA8c2VsZWN0IGlkPVwicXVhbnRpdHlcIiBuYW1lPVwicXVhbnRpdHlcIiBkaXNhYmxlZD5cbiAgICAgICAgICAgIDxvcHRpb24+LTwvb3B0aW9uPlxuICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICB9XG4gICAgICAgIHt0aGlzLnN0YXRlLnNpemVzLmxlbmd0aCA+IDAgP1xuICAgICAgICAgIHRoaXMuc3RhdGUuc2l6ZVNlbGVjdGlvbiA9PT0gXCJcIiA/XG4gICAgICAgICAgICAvKiB0aGVyZSBpcyBxdWFudGl0eSwgYnV0IHNpemUgaXMgbm90IHNlbGVjdGVkLiBCdXR0b24gb3BlbnMgZHJvcGRvd24gZGlzcGxheSBtZXNzYWdlICovXG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuZW5mb3JjZVNpemVTZWxlY3Rpb24uYmluZCh0aGlzKX0+QWRkIHRvIENhcnQ8L2J1dHRvbj5cbiAgICAgICAgICAgIDpcbiAgICAgICAgICAgIC8qIHF1YW50aXR5IGFuZCBzaXplIHNlbGVjdGVkLiBCdXR0b24gYWRkcyB0byBjYXJ0ICovXG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuYWRkVG9DYXJ0LmJpbmQodGhpcyl9PkFkZCB0byBDYXJ0PC9idXR0b24+XG4gICAgICAgICAgOlxuICAgICAgICAgIC8qIGhpZGUgYnV0dG9uICovXG4gICAgICAgICAgPGJ1dHRvbiBzdHlsZT17e3Zpc2liaWxpdHk6ICdoaWRkZW4nfX0+QWRkIHRvIENhcnQ8L2J1dHRvbj5cbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBZGRUb0NhcnQ7Il19