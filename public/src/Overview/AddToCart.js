import React from 'react';
import SizeSelector from './SizeSelector.jsx';
import QuantitySelector from './QuantitySelector.jsx'; //import token from '../../token.jsx';

import axios from 'axios';

class AddToCart extends React.Component {
  //expects props to contain object called skus
  constructor(props) {
    super(props);
    this.state = {
      sizeFirstSkus: {},
      sizes: [],
      sizeSelection: '',
      quantityEnabled: false,
      quantityAvailable: 0,
      quantitySelection: null
    };
  }

  changeSize(e) {
    // if this is the first slection away formthe default, remove "Select Size as an option"
    if (document.getElementById('size').options[0].value === 'Select Size') {
      document.getElementById('size').remove(0);
    }

    var newSize = e.target.value;
    document.getElementById('quantity').value = 1;
    this.setState({
      sizeSelection: newSize,
      quantityEnabled: true,
      quantityAvailable: this.state.sizeFirstSkus[newSize].quantity,
      quantitySelection: 1
    });
  }

  changeQuantity(e) {
    var newQuantity = e.target.value;
    this.setState({
      quantitySelection: newQuantity
    });
  }

  enforceSizeSelection(e) {
    //opens size dropdown
    //displays a message that says "Please select size"
    //come back to this if time to figure out how to open the dropdown and display a more graceful message
    alert('Please select size');
  }

  addToCart(e) {
    //may not be working properly. Will have to test again when I have a real SKU instead of dummy data
    var sku_id = Number.parseInt(this.state.sizeFirstSkus[this.state.sizeSelection].sku_id);
    axios({
      method: 'post',
      url: 'https://app-hrsei-api.herokuapp.com/api/fec2/hratx/cart',
      data: {
        sku_id: sku_id,
        count: this.state.quantitySelection
      },
      headers: {
        'Authorization': token
      }
    }).then(() => {
      console.log('added to cart');
    }).catch(err => {
      console.log('error');
      throw err;
    });
  }

  componentDidMount() {
    //populates sizeFirstSkus and sizes objects
    var sizeFirstSkus = {};
    var size, quantity;

    for (var k in this.props.skus) {
      size = this.props.skus[k].size;
      quantity = this.props.skus[k].quantity;
      sizeFirstSkus[size] = {
        sku_id: k,
        quantity: quantity
      };
    }

    this.setState({
      sizeFirstSkus: sizeFirstSkus,
      sizes: Object.keys(sizeFirstSkus)
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, this.state.sizes.length === 0 ? /*#__PURE__*/React.createElement("select", {
      id: "size",
      name: "size",
      disabled: true
    }, /*#__PURE__*/React.createElement("option", null, "OUT OF STOCK")) : /*#__PURE__*/React.createElement(SizeSelector, {
      sizes: this.state.sizes,
      change: this.changeSize.bind(this)
    }), this.state.quantityEnabled ? /*#__PURE__*/React.createElement(QuantitySelector, {
      quantityAvailable: this.state.quantityAvailable,
      change: this.changeQuantity.bind(this)
    }) : /*#__PURE__*/React.createElement("select", {
      id: "quantity",
      name: "quantity",
      disabled: true
    }, /*#__PURE__*/React.createElement("option", null, "-")), this.state.sizes.length > 0 ? this.state.sizeSelection === "" ?
    /*#__PURE__*/

    /* there is quantity, but size is not selected. Button opens dropdown display message */
    React.createElement("button", {
      onClick: this.enforceSizeSelection.bind(this)
    }, "Add to Cart") :
    /*#__PURE__*/

    /* quantity and size selected. Button adds to cart */
    React.createElement("button", {
      onClick: this.addToCart.bind(this)
    }, "Add to Cart") :
    /*#__PURE__*/

    /* hide button */
    React.createElement("button", {
      style: {
        visibility: 'hidden'
      }
    }, "Add to Cart"));
  }

}

;
export default AddToCart;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2NsaWVudC9zcmMvT3ZlcnZpZXcvQWRkVG9DYXJ0LmpzeCJdLCJuYW1lcyI6WyJSZWFjdCIsIlNpemVTZWxlY3RvciIsIlF1YW50aXR5U2VsZWN0b3IiLCJheGlvcyIsIkFkZFRvQ2FydCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJzdGF0ZSIsInNpemVGaXJzdFNrdXMiLCJzaXplcyIsInNpemVTZWxlY3Rpb24iLCJxdWFudGl0eUVuYWJsZWQiLCJxdWFudGl0eUF2YWlsYWJsZSIsInF1YW50aXR5U2VsZWN0aW9uIiwiY2hhbmdlU2l6ZSIsImUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwib3B0aW9ucyIsInZhbHVlIiwicmVtb3ZlIiwibmV3U2l6ZSIsInRhcmdldCIsInNldFN0YXRlIiwicXVhbnRpdHkiLCJjaGFuZ2VRdWFudGl0eSIsIm5ld1F1YW50aXR5IiwiZW5mb3JjZVNpemVTZWxlY3Rpb24iLCJhbGVydCIsImFkZFRvQ2FydCIsInNrdV9pZCIsIk51bWJlciIsInBhcnNlSW50IiwibWV0aG9kIiwidXJsIiwiZGF0YSIsImNvdW50IiwiaGVhZGVycyIsInRva2VuIiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVyciIsImNvbXBvbmVudERpZE1vdW50Iiwic2l6ZSIsImsiLCJza3VzIiwiT2JqZWN0Iiwia2V5cyIsInJlbmRlciIsImxlbmd0aCIsImJpbmQiLCJ2aXNpYmlsaXR5Il0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxLQUFQLE1BQWtCLE9BQWxCO0FBQ0EsT0FBT0MsWUFBUCxNQUF5QixvQkFBekI7QUFDQSxPQUFPQyxnQkFBUCxNQUE2Qix3QkFBN0IsQyxDQUNBOztBQUNBLE9BQU9DLEtBQVAsTUFBa0IsT0FBbEI7O0FBRUEsTUFBTUMsU0FBTixTQUF3QkosS0FBSyxDQUFDSyxTQUE5QixDQUF3QztBQUN0QztBQUNBQyxFQUFBQSxXQUFXLENBQUNDLEtBQUQsRUFBUTtBQUNqQixVQUFNQSxLQUFOO0FBQ0EsU0FBS0MsS0FBTCxHQUFhO0FBQ1hDLE1BQUFBLGFBQWEsRUFBRSxFQURKO0FBRVhDLE1BQUFBLEtBQUssRUFBRSxFQUZJO0FBR1hDLE1BQUFBLGFBQWEsRUFBRSxFQUhKO0FBSVhDLE1BQUFBLGVBQWUsRUFBRSxLQUpOO0FBS1hDLE1BQUFBLGlCQUFpQixFQUFFLENBTFI7QUFNWEMsTUFBQUEsaUJBQWlCLEVBQUU7QUFOUixLQUFiO0FBUUQ7O0FBRURDLEVBQUFBLFVBQVUsQ0FBQ0MsQ0FBRCxFQUFJO0FBQ1o7QUFDQSxRQUFHQyxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsTUFBeEIsRUFBZ0NDLE9BQWhDLENBQXdDLENBQXhDLEVBQTJDQyxLQUEzQyxLQUFxRCxhQUF4RCxFQUF1RTtBQUNyRUgsTUFBQUEsUUFBUSxDQUFDQyxjQUFULENBQXdCLE1BQXhCLEVBQWdDRyxNQUFoQyxDQUF1QyxDQUF2QztBQUNEOztBQUNELFFBQUlDLE9BQU8sR0FBR04sQ0FBQyxDQUFDTyxNQUFGLENBQVNILEtBQXZCO0FBQ0FILElBQUFBLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixVQUF4QixFQUFvQ0UsS0FBcEMsR0FBNEMsQ0FBNUM7QUFDQSxTQUFLSSxRQUFMLENBQWM7QUFDWmIsTUFBQUEsYUFBYSxFQUFFVyxPQURIO0FBRVpWLE1BQUFBLGVBQWUsRUFBRSxJQUZMO0FBR1pDLE1BQUFBLGlCQUFpQixFQUFFLEtBQUtMLEtBQUwsQ0FBV0MsYUFBWCxDQUF5QmEsT0FBekIsRUFBa0NHLFFBSHpDO0FBSVpYLE1BQUFBLGlCQUFpQixFQUFFO0FBSlAsS0FBZDtBQU1EOztBQUVEWSxFQUFBQSxjQUFjLENBQUNWLENBQUQsRUFBSTtBQUNoQixRQUFJVyxXQUFXLEdBQUdYLENBQUMsQ0FBQ08sTUFBRixDQUFTSCxLQUEzQjtBQUNBLFNBQUtJLFFBQUwsQ0FBYztBQUNaVixNQUFBQSxpQkFBaUIsRUFBRWE7QUFEUCxLQUFkO0FBR0Q7O0FBRURDLEVBQUFBLG9CQUFvQixDQUFDWixDQUFELEVBQUk7QUFDdEI7QUFDQTtBQUNBO0FBQ0FhLElBQUFBLEtBQUssQ0FBQyxvQkFBRCxDQUFMO0FBQ0Q7O0FBRURDLEVBQUFBLFNBQVMsQ0FBQ2QsQ0FBRCxFQUFJO0FBQ1g7QUFDQSxRQUFJZSxNQUFNLEdBQUdDLE1BQU0sQ0FBQ0MsUUFBUCxDQUFnQixLQUFLekIsS0FBTCxDQUFXQyxhQUFYLENBQXlCLEtBQUtELEtBQUwsQ0FBV0csYUFBcEMsRUFBbURvQixNQUFuRSxDQUFiO0FBQ0E1QixJQUFBQSxLQUFLLENBQUM7QUFDSitCLE1BQUFBLE1BQU0sRUFBRSxNQURKO0FBRUpDLE1BQUFBLEdBQUcsRUFBRSx5REFGRDtBQUdKQyxNQUFBQSxJQUFJLEVBQUU7QUFDSkwsUUFBQUEsTUFBTSxFQUFFQSxNQURKO0FBRUpNLFFBQUFBLEtBQUssRUFBRSxLQUFLN0IsS0FBTCxDQUFXTTtBQUZkLE9BSEY7QUFPSndCLE1BQUFBLE9BQU8sRUFBRTtBQUNQLHlCQUFpQkM7QUFEVjtBQVBMLEtBQUQsQ0FBTCxDQVdDQyxJQVhELENBV00sTUFBTTtBQUNWQyxNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxlQUFaO0FBQ0QsS0FiRCxFQWNDQyxLQWRELENBY1FDLEdBQUQsSUFBUztBQUNkSCxNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxPQUFaO0FBQ0EsWUFBTUUsR0FBTjtBQUNELEtBakJEO0FBa0JEOztBQUVEQyxFQUFBQSxpQkFBaUIsR0FBRztBQUNsQjtBQUNBLFFBQUlwQyxhQUFhLEdBQUcsRUFBcEI7QUFDQSxRQUFJcUMsSUFBSixFQUFVckIsUUFBVjs7QUFDQSxTQUFLLElBQUlzQixDQUFULElBQWMsS0FBS3hDLEtBQUwsQ0FBV3lDLElBQXpCLEVBQStCO0FBQzdCRixNQUFBQSxJQUFJLEdBQUcsS0FBS3ZDLEtBQUwsQ0FBV3lDLElBQVgsQ0FBZ0JELENBQWhCLEVBQW1CRCxJQUExQjtBQUNBckIsTUFBQUEsUUFBUSxHQUFHLEtBQUtsQixLQUFMLENBQVd5QyxJQUFYLENBQWdCRCxDQUFoQixFQUFtQnRCLFFBQTlCO0FBQ0FoQixNQUFBQSxhQUFhLENBQUNxQyxJQUFELENBQWIsR0FBc0I7QUFDcEJmLFFBQUFBLE1BQU0sRUFBRWdCLENBRFk7QUFFcEJ0QixRQUFBQSxRQUFRLEVBQUVBO0FBRlUsT0FBdEI7QUFJRDs7QUFDRCxTQUFLRCxRQUFMLENBQWM7QUFDWmYsTUFBQUEsYUFBYSxFQUFFQSxhQURIO0FBRVpDLE1BQUFBLEtBQUssRUFBRXVDLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZekMsYUFBWjtBQUZLLEtBQWQ7QUFJRDs7QUFFRDBDLEVBQUFBLE1BQU0sR0FBRztBQUNQLHdCQUNFLGlDQUNHLEtBQUszQyxLQUFMLENBQVdFLEtBQVgsQ0FBaUIwQyxNQUFqQixLQUE0QixDQUE1QixnQkFDQztBQUFRLE1BQUEsRUFBRSxFQUFDLE1BQVg7QUFBa0IsTUFBQSxJQUFJLEVBQUMsTUFBdkI7QUFBOEIsTUFBQSxRQUFRO0FBQXRDLG9CQUNFLG1EQURGLENBREQsZ0JBS0Msb0JBQUMsWUFBRDtBQUFjLE1BQUEsS0FBSyxFQUFFLEtBQUs1QyxLQUFMLENBQVdFLEtBQWhDO0FBQXVDLE1BQUEsTUFBTSxFQUFFLEtBQUtLLFVBQUwsQ0FBZ0JzQyxJQUFoQixDQUFxQixJQUFyQjtBQUEvQyxNQU5KLEVBUUcsS0FBSzdDLEtBQUwsQ0FBV0ksZUFBWCxnQkFDQyxvQkFBQyxnQkFBRDtBQUFrQixNQUFBLGlCQUFpQixFQUFFLEtBQUtKLEtBQUwsQ0FBV0ssaUJBQWhEO0FBQW1FLE1BQUEsTUFBTSxFQUFFLEtBQUthLGNBQUwsQ0FBb0IyQixJQUFwQixDQUF5QixJQUF6QjtBQUEzRSxNQURELGdCQUdDO0FBQVEsTUFBQSxFQUFFLEVBQUMsVUFBWDtBQUFzQixNQUFBLElBQUksRUFBQyxVQUEzQjtBQUFzQyxNQUFBLFFBQVE7QUFBOUMsb0JBQ0Usd0NBREYsQ0FYSixFQWVHLEtBQUs3QyxLQUFMLENBQVdFLEtBQVgsQ0FBaUIwQyxNQUFqQixHQUEwQixDQUExQixHQUNDLEtBQUs1QyxLQUFMLENBQVdHLGFBQVgsS0FBNkIsRUFBN0I7QUFBQTs7QUFDRTtBQUNBO0FBQVEsTUFBQSxPQUFPLEVBQUUsS0FBS2lCLG9CQUFMLENBQTBCeUIsSUFBMUIsQ0FBK0IsSUFBL0I7QUFBakIscUJBRkY7QUFBQTs7QUFJRTtBQUNBO0FBQVEsTUFBQSxPQUFPLEVBQUUsS0FBS3ZCLFNBQUwsQ0FBZXVCLElBQWYsQ0FBb0IsSUFBcEI7QUFBakIscUJBTkg7QUFBQTs7QUFRQztBQUNBO0FBQVEsTUFBQSxLQUFLLEVBQUU7QUFBQ0MsUUFBQUEsVUFBVSxFQUFFO0FBQWI7QUFBZixxQkF4QkosQ0FERjtBQTZCRDs7QUFsSHFDOztBQW1IdkM7QUFFRCxlQUFlbEQsU0FBZiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgU2l6ZVNlbGVjdG9yIGZyb20gJy4vU2l6ZVNlbGVjdG9yLmpzeCc7XG5pbXBvcnQgUXVhbnRpdHlTZWxlY3RvciBmcm9tICcuL1F1YW50aXR5U2VsZWN0b3IuanN4Jztcbi8vaW1wb3J0IHRva2VuIGZyb20gJy4uLy4uL3Rva2VuLmpzeCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuXG5jbGFzcyBBZGRUb0NhcnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAvL2V4cGVjdHMgcHJvcHMgdG8gY29udGFpbiBvYmplY3QgY2FsbGVkIHNrdXNcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHNpemVGaXJzdFNrdXM6IHt9LFxuICAgICAgc2l6ZXM6IFtdLFxuICAgICAgc2l6ZVNlbGVjdGlvbjogJycsXG4gICAgICBxdWFudGl0eUVuYWJsZWQ6IGZhbHNlLFxuICAgICAgcXVhbnRpdHlBdmFpbGFibGU6IDAsXG4gICAgICBxdWFudGl0eVNlbGVjdGlvbjogbnVsbFxuICAgIH07XG4gIH1cblxuICBjaGFuZ2VTaXplKGUpIHtcbiAgICAvLyBpZiB0aGlzIGlzIHRoZSBmaXJzdCBzbGVjdGlvbiBhd2F5IGZvcm10aGUgZGVmYXVsdCwgcmVtb3ZlIFwiU2VsZWN0IFNpemUgYXMgYW4gb3B0aW9uXCJcbiAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2l6ZScpLm9wdGlvbnNbMF0udmFsdWUgPT09ICdTZWxlY3QgU2l6ZScpIHtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaXplJykucmVtb3ZlKDApO1xuICAgIH1cbiAgICB2YXIgbmV3U2l6ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWFudGl0eScpLnZhbHVlID0gMTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHNpemVTZWxlY3Rpb246IG5ld1NpemUsXG4gICAgICBxdWFudGl0eUVuYWJsZWQ6IHRydWUsXG4gICAgICBxdWFudGl0eUF2YWlsYWJsZTogdGhpcy5zdGF0ZS5zaXplRmlyc3RTa3VzW25ld1NpemVdLnF1YW50aXR5LFxuICAgICAgcXVhbnRpdHlTZWxlY3Rpb246IDFcbiAgICB9KTtcbiAgfVxuXG4gIGNoYW5nZVF1YW50aXR5KGUpIHtcbiAgICB2YXIgbmV3UXVhbnRpdHkgPSBlLnRhcmdldC52YWx1ZTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHF1YW50aXR5U2VsZWN0aW9uOiBuZXdRdWFudGl0eVxuICAgIH0pO1xuICB9XG5cbiAgZW5mb3JjZVNpemVTZWxlY3Rpb24oZSkge1xuICAgIC8vb3BlbnMgc2l6ZSBkcm9wZG93blxuICAgIC8vZGlzcGxheXMgYSBtZXNzYWdlIHRoYXQgc2F5cyBcIlBsZWFzZSBzZWxlY3Qgc2l6ZVwiXG4gICAgLy9jb21lIGJhY2sgdG8gdGhpcyBpZiB0aW1lIHRvIGZpZ3VyZSBvdXQgaG93IHRvIG9wZW4gdGhlIGRyb3Bkb3duIGFuZCBkaXNwbGF5IGEgbW9yZSBncmFjZWZ1bCBtZXNzYWdlXG4gICAgYWxlcnQoJ1BsZWFzZSBzZWxlY3Qgc2l6ZScpO1xuICB9XG5cbiAgYWRkVG9DYXJ0KGUpIHtcbiAgICAvL21heSBub3QgYmUgd29ya2luZyBwcm9wZXJseS4gV2lsbCBoYXZlIHRvIHRlc3QgYWdhaW4gd2hlbiBJIGhhdmUgYSByZWFsIFNLVSBpbnN0ZWFkIG9mIGR1bW15IGRhdGFcbiAgICB2YXIgc2t1X2lkID0gTnVtYmVyLnBhcnNlSW50KHRoaXMuc3RhdGUuc2l6ZUZpcnN0U2t1c1t0aGlzLnN0YXRlLnNpemVTZWxlY3Rpb25dLnNrdV9pZCk7XG4gICAgYXhpb3Moe1xuICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICB1cmw6ICdodHRwczovL2FwcC1ocnNlaS1hcGkuaGVyb2t1YXBwLmNvbS9hcGkvZmVjMi9ocmF0eC9jYXJ0JyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgc2t1X2lkOiBza3VfaWQsXG4gICAgICAgIGNvdW50OiB0aGlzLnN0YXRlLnF1YW50aXR5U2VsZWN0aW9uXG4gICAgICB9LFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IHRva2VuXG4gICAgICB9XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnYWRkZWQgdG8gY2FydCcpXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yJyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfSk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAvL3BvcHVsYXRlcyBzaXplRmlyc3RTa3VzIGFuZCBzaXplcyBvYmplY3RzXG4gICAgdmFyIHNpemVGaXJzdFNrdXMgPSB7fTtcbiAgICB2YXIgc2l6ZSwgcXVhbnRpdHk7XG4gICAgZm9yICh2YXIgayBpbiB0aGlzLnByb3BzLnNrdXMpIHtcbiAgICAgIHNpemUgPSB0aGlzLnByb3BzLnNrdXNba10uc2l6ZTtcbiAgICAgIHF1YW50aXR5ID0gdGhpcy5wcm9wcy5za3VzW2tdLnF1YW50aXR5O1xuICAgICAgc2l6ZUZpcnN0U2t1c1tzaXplXSA9IHtcbiAgICAgICAgc2t1X2lkOiBrLFxuICAgICAgICBxdWFudGl0eTogcXVhbnRpdHlcbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2l6ZUZpcnN0U2t1czogc2l6ZUZpcnN0U2t1cyxcbiAgICAgIHNpemVzOiBPYmplY3Qua2V5cyhzaXplRmlyc3RTa3VzKVxuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICB7dGhpcy5zdGF0ZS5zaXplcy5sZW5ndGggPT09IDAgP1xuICAgICAgICAgIDxzZWxlY3QgaWQ9XCJzaXplXCIgbmFtZT1cInNpemVcIiBkaXNhYmxlZD5cbiAgICAgICAgICAgIDxvcHRpb24+T1VUIE9GIFNUT0NLPC9vcHRpb24+XG4gICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgOlxuICAgICAgICAgIDxTaXplU2VsZWN0b3Igc2l6ZXM9e3RoaXMuc3RhdGUuc2l6ZXN9IGNoYW5nZT17dGhpcy5jaGFuZ2VTaXplLmJpbmQodGhpcyl9Lz5cbiAgICAgICAgfVxuICAgICAgICB7dGhpcy5zdGF0ZS5xdWFudGl0eUVuYWJsZWQgP1xuICAgICAgICAgIDxRdWFudGl0eVNlbGVjdG9yIHF1YW50aXR5QXZhaWxhYmxlPXt0aGlzLnN0YXRlLnF1YW50aXR5QXZhaWxhYmxlfSBjaGFuZ2U9e3RoaXMuY2hhbmdlUXVhbnRpdHkuYmluZCh0aGlzKX0vPlxuICAgICAgICAgIDpcbiAgICAgICAgICA8c2VsZWN0IGlkPVwicXVhbnRpdHlcIiBuYW1lPVwicXVhbnRpdHlcIiBkaXNhYmxlZD5cbiAgICAgICAgICAgIDxvcHRpb24+LTwvb3B0aW9uPlxuICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICB9XG4gICAgICAgIHt0aGlzLnN0YXRlLnNpemVzLmxlbmd0aCA+IDAgP1xuICAgICAgICAgIHRoaXMuc3RhdGUuc2l6ZVNlbGVjdGlvbiA9PT0gXCJcIiA/XG4gICAgICAgICAgICAvKiB0aGVyZSBpcyBxdWFudGl0eSwgYnV0IHNpemUgaXMgbm90IHNlbGVjdGVkLiBCdXR0b24gb3BlbnMgZHJvcGRvd24gZGlzcGxheSBtZXNzYWdlICovXG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuZW5mb3JjZVNpemVTZWxlY3Rpb24uYmluZCh0aGlzKX0+QWRkIHRvIENhcnQ8L2J1dHRvbj5cbiAgICAgICAgICAgIDpcbiAgICAgICAgICAgIC8qIHF1YW50aXR5IGFuZCBzaXplIHNlbGVjdGVkLiBCdXR0b24gYWRkcyB0byBjYXJ0ICovXG4gICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuYWRkVG9DYXJ0LmJpbmQodGhpcyl9PkFkZCB0byBDYXJ0PC9idXR0b24+XG4gICAgICAgICAgOlxuICAgICAgICAgIC8qIGhpZGUgYnV0dG9uICovXG4gICAgICAgICAgPGJ1dHRvbiBzdHlsZT17e3Zpc2liaWxpdHk6ICdoaWRkZW4nfX0+QWRkIHRvIENhcnQ8L2J1dHRvbj5cbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBZGRUb0NhcnQ7Il19