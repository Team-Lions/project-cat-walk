import React from 'react';
import SizeSelector from './SizeSelector.jsx';
import QuantitySelector from './QuantitySelector.jsx';
import axios from 'axios';
import token from '../../../public/token.js';

class AddToCart extends React.Component {
  //expects props to contain object called skus
  constructor(props) {
    super(props);
    this.state = {
      sizeFirstSkus: {},
      sizes: [],
      sizeSelection: '',
      quantityEnabled: false,
      quantityAvailable: 0,
      quantitySelection: null
    };
  }

  changeSize(e) {
    // if this is the first slection away formthe default, remove "Select Size as an option"
    if (document.getElementById('size').options[0].value === 'Select Size') {
      document.getElementById('size').remove(0);
    }

    var newSize = e.target.value;
    document.getElementById('quantity').value = 1;
    this.setState({
      sizeSelection: newSize,
      quantityEnabled: true,
      quantityAvailable: this.state.sizeFirstSkus[newSize].quantity,
      quantitySelection: 1
    });
  }

  changeQuantity(e) {
    var newQuantity = e.target.value;
    this.setState({
      quantitySelection: newQuantity
    });
  }

  enforceSizeSelection(e) {
    //opens size dropdown
    //displays a message that says "Please select size"
    //come back to this if time to figure out how to open the dropdown and display a more graceful message
    alert('Please select size');
  }

  addToCart(e) {
    //may not be working properly. Will have to test again when I have a real SKU instead of dummy data
    var sku_id = Number.parseInt(this.state.sizeFirstSkus[this.state.sizeSelection].sku_id);
    axios({
      method: 'post',
      url: 'https://app-hrsei-api.herokuapp.com/api/fec2/hratx/cart',
      data: {
        sku_id: sku_id,
        count: this.state.quantitySelection
      },
      headers: {
        'Authorization': token
      }
    }).then(() => {
      console.log('added to cart');
    }).catch(err => {
      console.log('error');
      throw err;
    });
  }

  componentDidMount() {
    //populates sizeFirstSkus and sizes objects
    var sizeFirstSkus = {};
    var size, quantity;

    for (var k in this.props.skus) {
      size = this.props.skus[k].size;
      quantity = this.props.skus[k].quantity;
      sizeFirstSkus[size] = {
        sku_id: k,
        quantity: quantity
      };
    }

    this.setState({
      sizeFirstSkus: sizeFirstSkus,
      sizes: Object.keys(sizeFirstSkus)
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, this.state.sizes.length === 0 ? /*#__PURE__*/React.createElement("select", {
      id: "size",
      name: "size",
      disabled: true
    }, /*#__PURE__*/React.createElement("option", null, "OUT OF STOCK")) : /*#__PURE__*/React.createElement(SizeSelector, {
      sizes: this.state.sizes,
      change: this.changeSize.bind(this)
    }), this.state.quantityEnabled ? /*#__PURE__*/React.createElement(QuantitySelector, {
      quantityAvailable: this.state.quantityAvailable,
      change: this.changeQuantity.bind(this)
    }) : /*#__PURE__*/React.createElement("select", {
      id: "quantity",
      name: "quantity",
      disabled: true
    }, /*#__PURE__*/React.createElement("option", null, "-")), this.state.sizes.length > 0 ? this.state.sizeSelection === "" ?
    /*#__PURE__*/

    /* there is quantity, but size is not selected. Button opens dropdown display message */
    React.createElement("button", {
      onClick: this.enforceSizeSelection.bind(this)
    }, "Add to Cart") :
    /*#__PURE__*/

    /* quantity and size selected. Button adds to cart */
    React.createElement("button", {
      onClick: this.addToCart.bind(this)
    }, "Add to Cart") :
    /*#__PURE__*/

    /* hide button */
    React.createElement("button", {
      style: {
        visibility: 'hidden'
      }
    }, "Add to Cart"));
  }

}

;
export default AddToCart;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2NsaWVudC9zcmMvT3ZlcnZpZXcvQWRkVG9DYXJ0LmpzeCJdLCJuYW1lcyI6WyJSZWFjdCIsIlNpemVTZWxlY3RvciIsIlF1YW50aXR5U2VsZWN0b3IiLCJheGlvcyIsInRva2VuIiwiQWRkVG9DYXJ0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsInN0YXRlIiwic2l6ZUZpcnN0U2t1cyIsInNpemVzIiwic2l6ZVNlbGVjdGlvbiIsInF1YW50aXR5RW5hYmxlZCIsInF1YW50aXR5QXZhaWxhYmxlIiwicXVhbnRpdHlTZWxlY3Rpb24iLCJjaGFuZ2VTaXplIiwiZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvcHRpb25zIiwidmFsdWUiLCJyZW1vdmUiLCJuZXdTaXplIiwidGFyZ2V0Iiwic2V0U3RhdGUiLCJxdWFudGl0eSIsImNoYW5nZVF1YW50aXR5IiwibmV3UXVhbnRpdHkiLCJlbmZvcmNlU2l6ZVNlbGVjdGlvbiIsImFsZXJ0IiwiYWRkVG9DYXJ0Iiwic2t1X2lkIiwiTnVtYmVyIiwicGFyc2VJbnQiLCJtZXRob2QiLCJ1cmwiLCJkYXRhIiwiY291bnQiLCJoZWFkZXJzIiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVyciIsImNvbXBvbmVudERpZE1vdW50Iiwic2l6ZSIsImsiLCJza3VzIiwiT2JqZWN0Iiwia2V5cyIsInJlbmRlciIsImxlbmd0aCIsImJpbmQiLCJ2aXNpYmlsaXR5Il0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxLQUFQLE1BQWtCLE9BQWxCO0FBQ0EsT0FBT0MsWUFBUCxNQUF5QixvQkFBekI7QUFDQSxPQUFPQyxnQkFBUCxNQUE2Qix3QkFBN0I7QUFDQSxPQUFPQyxLQUFQLE1BQWtCLE9BQWxCO0FBQ0EsT0FBT0MsS0FBUCxNQUFrQiwwQkFBbEI7O0FBRUEsTUFBTUMsU0FBTixTQUF3QkwsS0FBSyxDQUFDTSxTQUE5QixDQUF3QztBQUN0QztBQUNBQyxFQUFBQSxXQUFX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TCxDQUFXRyxhQUFYLEtBQTZCLEVBQTdCO0FBQUE7O0FBQ0U7QUFDQTtBQUFRLE1BQUEsT0FBTyxFQUFFLEtBQUtpQixvQkFBTCxDQUEwQndCLElBQTFCLENBQStCLElBQS9CO0FBQWpCLHFCQUZGO0FBQUE7O0FBSUU7QUFDQTtBQUFRLE1BQUEsT0FBTyxFQUFFLEtBQUt0QixTQUFMLENBQWVzQixJQUFmLENBQW9CLElBQXBCO0FBQWpCLHFCQU5IO0FBQUE7O0FBUUM7QUFDQTtBQUFRLE1BQUEsS0FBSyxFQUFFO0FBQUNDLFFBQUFBLFVBQVUsRUFBRTtBQUFiO0FBQWYscUJBeEJKLENBREY7QUE2QkQ7O0FBbEhxQzs7QUFtSHZDO0FBRUQsZUFBZWpELFNBQWYiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFNpemVTZWxlY3RvciBmcm9tICcuL1NpemVTZWxlY3Rvci5qc3gnO1xuaW1wb3J0IFF1YW50aXR5U2VsZWN0b3IgZnJvbSAnLi9RdWFudGl0eVNlbGVjdG9yLmpzeCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHRva2VuIGZyb20gJy4uLy4uLy4uL3B1YmxpYy90b2tlbi5qcyc7XG5cbmNsYXNzIEFkZFRvQ2FydCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIC8vZXhwZWN0cyBwcm9wcyB0byBjb250YWluIG9iamVjdCBjYWxsZWQgc2t1c1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2l6ZUZpcnN0U2t1czoge30sXG4gICAgICBzaXplczogW10sXG4gICAgICBzaXplU2VsZWN0aW9uOiAnJyxcbiAgICAgIHF1YW50aXR5RW5hYmxlZDogZmFsc2UsXG4gICAgICBxdWFudGl0eUF2YWlsYWJsZTogMCxcbiAgICAgIHF1YW50aXR5U2VsZWN0aW9uOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIGNoYW5nZVNpemUoZSkge1xuICAgIC8vIGlmIHRoaXMgaXMgdGhlIGZpcnN0IHNsZWN0aW9uIGF3YXkgZm9ybXRoZSBkZWZhdWx0LCByZW1vdmUgXCJTZWxlY3QgU2l6ZSBhcyBhbiBvcHRpb25cIlxuICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaXplJykub3B0aW9uc1swXS52YWx1ZSA9PT0gJ1NlbGVjdCBTaXplJykge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpemUnKS5yZW1vdmUoMCk7XG4gICAgfVxuICAgIHZhciBuZXdTaXplID0gZS50YXJnZXQudmFsdWU7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1YW50aXR5JykudmFsdWUgPSAxO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2l6ZVNlbGVjdGlvbjogbmV3U2l6ZSxcbiAgICAgIHF1YW50aXR5RW5hYmxlZDogdHJ1ZSxcbiAgICAgIHF1YW50aXR5QXZhaWxhYmxlOiB0aGlzLnN0YXRlLnNpemVGaXJzdFNrdXNbbmV3U2l6ZV0ucXVhbnRpdHksXG4gICAgICBxdWFudGl0eVNlbGVjdGlvbjogMVxuICAgIH0pO1xuICB9XG5cbiAgY2hhbmdlUXVhbnRpdHkoZSkge1xuICAgIHZhciBuZXdRdWFudGl0eSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgcXVhbnRpdHlTZWxlY3Rpb246IG5ld1F1YW50aXR5XG4gICAgfSk7XG4gIH1cblxuICBlbmZvcmNlU2l6ZVNlbGVjdGlvbihlKSB7XG4gICAgLy9vcGVucyBzaXplIGRyb3Bkb3duXG4gICAgLy9kaXNwbGF5cyBhIG1lc3NhZ2UgdGhhdCBzYXlzIFwiUGxlYXNlIHNlbGVjdCBzaXplXCJcbiAgICAvL2NvbWUgYmFjayB0byB0aGlzIGlmIHRpbWUgdG8gZmlndXJlIG91dCBob3cgdG8gb3BlbiB0aGUgZHJvcGRvd24gYW5kIGRpc3BsYXkgYSBtb3JlIGdyYWNlZnVsIG1lc3NhZ2VcbiAgICBhbGVydCgnUGxlYXNlIHNlbGVjdCBzaXplJyk7XG4gIH1cblxuICBhZGRUb0NhcnQoZSkge1xuICAgIC8vbWF5IG5vdCBiZSB3b3JraW5nIHByb3Blcmx5LiBXaWxsIGhhdmUgdG8gdGVzdCBhZ2FpbiB3aGVuIEkgaGF2ZSBhIHJlYWwgU0tVIGluc3RlYWQgb2YgZHVtbXkgZGF0YVxuICAgIHZhciBza3VfaWQgPSBOdW1iZXIucGFyc2VJbnQodGhpcy5zdGF0ZS5zaXplRmlyc3RTa3VzW3RoaXMuc3RhdGUuc2l6ZVNlbGVjdGlvbl0uc2t1X2lkKTtcbiAgICBheGlvcyh7XG4gICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgIHVybDogJ2h0dHBzOi8vYXBwLWhyc2VpLWFwaS5oZXJva3VhcHAuY29tL2FwaS9mZWMyL2hyYXR4L2NhcnQnLFxuICAgICAgZGF0YToge1xuICAgICAgICBza3VfaWQ6IHNrdV9pZCxcbiAgICAgICAgY291bnQ6IHRoaXMuc3RhdGUucXVhbnRpdHlTZWxlY3Rpb25cbiAgICAgIH0sXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogdG9rZW5cbiAgICAgIH1cbiAgICB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdhZGRlZCB0byBjYXJ0JylcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3InKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vcG9wdWxhdGVzIHNpemVGaXJzdFNrdXMgYW5kIHNpemVzIG9iamVjdHNcbiAgICB2YXIgc2l6ZUZpcnN0U2t1cyA9IHt9O1xuICAgIHZhciBzaXplLCBxdWFudGl0eTtcbiAgICBmb3IgKHZhciBrIGluIHRoaXMucHJvcHMuc2t1cykge1xuICAgICAgc2l6ZSA9IHRoaXMucHJvcHMuc2t1c1trXS5zaXplO1xuICAgICAgcXVhbnRpdHkgPSB0aGlzLnByb3BzLnNrdXNba10ucXVhbnRpdHk7XG4gICAgICBzaXplRmlyc3RTa3VzW3NpemVdID0ge1xuICAgICAgICBza3VfaWQ6IGssXG4gICAgICAgIHF1YW50aXR5OiBxdWFudGl0eVxuICAgICAgfTtcbiAgICB9XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBzaXplRmlyc3RTa3VzOiBzaXplRmlyc3RTa3VzLFxuICAgICAgc2l6ZXM6IE9iamVjdC5rZXlzKHNpemVGaXJzdFNrdXMpXG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIHt0aGlzLnN0YXRlLnNpemVzLmxlbmd0aCA9PT0gMCA/XG4gICAgICAgICAgPHNlbGVjdCBpZD1cInNpemVcIiBuYW1lPVwic2l6ZVwiIGRpc2FibGVkPlxuICAgICAgICAgICAgPG9wdGlvbj5PVVQgT0YgU1RPQ0s8L29wdGlvbj5cbiAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICA6XG4gICAgICAgICAgPFNpemVTZWxlY3RvciBzaXplcz17dGhpcy5zdGF0ZS5zaXplc30gY2hhbmdlPXt0aGlzLmNoYW5nZVNpemUuYmluZCh0aGlzKX0vPlxuICAgICAgICB9XG4gICAgICAgIHt0aGlzLnN0YXRlLnF1YW50aXR5RW5hYmxlZCA/XG4gICAgICAgICAgPFF1YW50aXR5U2VsZWN0b3IgcXVhbnRpdHlBdmFpbGFibGU9e3RoaXMuc3RhdGUucXVhbnRpdHlBdmFpbGFibGV9IGNoYW5nZT17dGhpcy5jaGFuZ2VRdWFudGl0eS5iaW5kKHRoaXMpfS8+XG4gICAgICAgICAgOlxuICAgICAgICAgIDxzZWxlY3QgaWQ9XCJxdWFudGl0eVwiIG5hbWU9XCJxdWFudGl0eVwiIGRpc2FibGVkPlxuICAgICAgICAgICAgPG9wdGlvbj4tPC9vcHRpb24+XG4gICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgIH1cbiAgICAgICAge3RoaXMuc3RhdGUuc2l6ZXMubGVuZ3RoID4gMCA/XG4gICAgICAgICAgdGhpcy5zdGF0ZS5zaXplU2VsZWN0aW9uID09PSBcIlwiID9cbiAgICAgICAgICAgIC8qIHRoZXJlIGlzIHF1YW50aXR5LCBidXQgc2l6ZSBpcyBub3Qgc2VsZWN0ZWQuIEJ1dHRvbiBvcGVucyBkcm9wZG93biBkaXNwbGF5IG1lc3NhZ2UgKi9cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5lbmZvcmNlU2l6ZVNlbGVjdGlvbi5iaW5kKHRoaXMpfT5BZGQgdG8gQ2FydDwvYnV0dG9uPlxuICAgICAgICAgICAgOlxuICAgICAgICAgICAgLyogcXVhbnRpdHkgYW5kIHNpemUgc2VsZWN0ZWQuIEJ1dHRvbiBhZGRzIHRvIGNhcnQgKi9cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5hZGRUb0NhcnQuYmluZCh0aGlzKX0+QWRkIHRvIENhcnQ8L2J1dHRvbj5cbiAgICAgICAgICA6XG4gICAgICAgICAgLyogaGlkZSBidXR0b24gKi9cbiAgICAgICAgICA8YnV0dG9uIHN0eWxlPXt7dmlzaWJpbGl0eTogJ2hpZGRlbid9fT5BZGQgdG8gQ2FydDwvYnV0dG9uPlxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFkZFRvQ2FydDsiXX0=